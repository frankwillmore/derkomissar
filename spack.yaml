spack:
  view: false
  concretization: together
  definitions:
  - enumerated_in_e4s:
    - autoconf@2.69
    - automake@1.16.2
    - berkeley-db@18.1.40
    - binutils@2.33.1+gold+headers+libiberty~nls
    - boost@1.73.0 visibility=global cxxstd=17
    - bzip2@1.0.8
    - cmake@3.17.3
    - diffutils@3.7
    - elfutils+bzip2~nls+xz ^m4 ^zlib+shared
    - expat@2.2.9
    - gdbm@1.18.1
    - gettext@0.20.2
    - help2man@1.47.11
    - libbsd@0.10.0
    - libiconv@1.16
    - libsigsegv@2.12
    - libunwind@1.4.0
    - libxml2@2.9.10
    - m4@1.4.18
    - ncurses@6.2
    - perl@5.30.3
    - pkgconf@1.7.3
    - python@3.7.8
    - readline@8.0
    - sqlite@3.31.1
    - tar@1.32
    - texinfo@6.5
    - xz@5.2.5
    - zlib@1.2.11
  - not_in_e4s:
    - hwloc@1.11.13
    - util-linux-uuid
    - libffi
    - openblas
    - json-c

  specs:
  - matrix:
    - [$with_gcc]
    - [$gcc_version]
#  - matrix:
#    - [$with_oneapi]
#    - [$oneapi_version]
  packages:
    all:
      compiler: [oneapi]
      providers:
        mpi: [mpich, intel-oneapi-mpi]
        blas: [openblas]
      permissions:
        read: world
        write: user
      target: [x86_64]
    openssl:
      externals:
      - spec: openssl
        prefix: /usr
      buildable: false
  compilers:
  
  # A new-ish gcc version, built for x86_64 so it will run on any architecture. Target is set to x86_64 so it will build other compilers (e.g. oneapi) to run on any architecture.
  - compiler:
      spec: gcc@10.2.0
      paths:
        cc: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.1.0/gcc-10.2.0-32axmts2pqg2v4ju53krhm646g4kpg23/bin/gcc
        cxx: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.1.0/gcc-10.2.0-32axmts2pqg2v4ju53krhm646g4kpg23/bin/g++
        f77: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.1.0/gcc-10.2.0-32axmts2pqg2v4ju53krhm646g4kpg23/bin/gfortran
        fc: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.1.0/gcc-10.2.0-32axmts2pqg2v4ju53krhm646g4kpg23/bin/gfortran
      flags: {}
      operating_system: opensuse_leap15
      target: x86_64
      modules: []
      environment: {}
      extra_rpaths: []
  - compiler:
      spec: oneapi@2021.1
      paths:
        cc: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.2.0/intel-oneapi-compilers-2021.1.0-uwk5vusleeaewakfh7c4a6luh2mxif2u/compiler/latest/linux/bin/icx
        cxx: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.2.0/intel-oneapi-compilers-2021.1.0-uwk5vusleeaewakfh7c4a6luh2mxif2u/compiler/latest/linux/bin/icpx
        f77: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.2.0/intel-oneapi-compilers-2021.1.0-uwk5vusleeaewakfh7c4a6luh2mxif2u/compiler/latest/linux/bin/ifx
        fc: /soft/spack/opt/spack/linux-opensuse_leap15-x86_64/gcc-10.2.0/intel-oneapi-compilers-2021.1.0-uwk5vusleeaewakfh7c4a6luh2mxif2u/compiler/latest/linux/bin/ifx
      flags: {-fsycl: !!null ''}
      operating_system: opensuse_leap15
      target: x86_64
      modules:
      - /soft/spack/share/spack/modules/linux-opensuse_leap15-x86_64/gcc-10.2.0-gcc-10.1.0-32axmts
      - /soft/spack/share/spack/modules/linux-opensuse_leap15-x86_64/intel-oneapi-compilers-2021.1.0-gcc-10.2.0-uwk5vus
      - /soft/spack/share/spack/modules/linux-opensuse_leap15-cascadelake/intel-oneapi-mpi-2021.1.1-oneapi-2021.1-yvh3tna
      environment: {}
      extra_rpaths: []
